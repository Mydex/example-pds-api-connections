<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Mydex Example 1</title>

  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="mydexexample1.css" rel="stylesheet">

</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="mydexexample1.html">Mydex</a>
      </div>

      <div class="collapse navbar-collapse" id="navbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="mydexexample1.html">Example 1</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="starter-template" id="title">
      <div class="page-header">
        <h1>Example 1 <small>Use this to access data in a PDS</small>
          <button type="button" class="btn btn-link btn-lg pull-right" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Help</button>
        </h1>
      </div>
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">Mydex Example 1 - Help</h4>
          </div>

          <div class="modal-body">
            <p>New to Mydex? Struggling to get your head around how to access a personal data store? Don't panic. This page will help you understand the whole process.</p>
            
            <h4>Step 1 - Enter your details in the form</h4>
            <p>The five boxes in the form contain the five pieces of information needed to access a PDS. These are:</p>
            <ul>
              <li>UID - This is the number unique to the PDS that you are trying to access. You can find it by logging into a profile on the <a href="https://sbx.mydex.org/">sandbox server</a> and going to the "manage connections" section.</li>              
              <li>PDS Key - This is the encryption key needed to unlock the PDS. It can also be found in the "manage connections" section of a profile.</li>             
              <li>Connection Node - This is unique to the entity trying to connect to the PDS. A good example is the developer read-only connection (17305). Be aware that the connection must be authorised by the user (in the "manage connections" section) before it can be used.</li>
              <li>API Key - This is the developer key that you receive when creating a Mydex account <a href="https://dev.mydex.org/user">here</a>.</li>
              <li>Dataset - This is the dataset that you want to access. Some examples are provided in the dropdown. A full list can be found in the data schema <a href="https://dev.mydex.org/data-schema/datasets.html">here</a>.</li>
            </ul>
            <p>If you don't understand some of these fields or haven't made a Mydex account yet, you can auto-fill the form with examples by clicking the buttons above it.</p>

            <h4>Step 2 - Click on the big blue "Get Data" button</h4>
            <p>This is where the magic happens! An ajax request is sent to retrive the data and display it in a nice little table at the bottom of the page so you can look through it.</p>
            <p>If you put in the wrong information, an error message is displayed with some help on how to modify your inputs. </p>

            <h4>Step 3 - Test out the url or the ajax request</h4>
            <p>Have a look at exactly what you are accessing by copying the url into your browser. This should take you to the JSON object that you get back from the ajax call.</p>
            <p>If you're feeling super brave, then have a go at making the ajax call yourself in a js file. Simply copy the example ajax call and change the <em>handle response</em> bit to something like console.log(response) to begin exploring the data.</p>

            <h4>Step 4 - Go forth and develop!</h4>
            <p>Thats all there is to it! You now know how to access a Mydex personal data store. If you need more information on how to access a PDS have a look at the <a href="https://dev.mydex.org/connection-api/connection-api-details.html">Mydex Developer Documentation</a>.</p>

          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="regular-template">
      <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" id="new-person-button">New Person</button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-primary person" id="chantell">Chantell</button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-success person" id="elroy">Elroy</button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-info person" id="laquita">Laquita</button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-warning person" id="mi">Mi</button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-danger person" id="edward">Edward</button>
        </div>
      </div>
    </div>

    <div class="regular-template">
      <div class="input-group">
        <span class="input-group-addon">UID</span> <input type="text" class="form-control field" placeholder="ID number of the PDS to be accessed" name="uid">
      </div>
    </div>

    <div class="regular-template">
      <div class="input-group">
        <span class="input-group-addon">PDS Key</span> <input type="text" class="form-control field" placeholder="Key to the PDS to be accessed" name="pds_key">
      </div>
    </div>

    <div class="regular-template">
      <div class="input-group">
        <span class="input-group-addon">Connection Node</span> <input type="text" class="form-control field" placeholder="ID number of the connection trying to access the PDS"  name="cid">
      </div>
    </div>

    <div class="regular-template">
      <div class="input-group">
        <span class="input-group-addon">API Key</span> <input type="text" class="form-control field" placeholder="Key of the developer trying to access the PDS" name="api_key">
      </div>
    </div>

    <div class="regular-template">
      <div class="input-group">
        <span class="input-group-addon">Dataset</span> <input type="text" class="form-control field" placeholder="Dataset to be accessed (choose from dropdown)" name="data_set">

        <div class="input-group-btn">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Available Datasets <span class="caret"></span></button>

          <ul class="dropdown-menu dropdown-menu-right" role="menu">
            <li><button type="button" class="btn btn-link dataset" id="field_ds_personal_details">Personal Details</button></li>

            <li><button type="button" class="btn btn-link dataset" id="field_ds_home">Home</button></li>

            <li><button type="button" class="btn btn-link dataset" id="field_ds_employment">Employment</button></li>

            <li><button type="button" class="btn btn-link dataset" id="field_ds_assets">Vehicle</button></li>

            <li><button type="button" class="btn btn-link dataset" id="field_ds_bank_account">Bank Account</button></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="regular-template">
      <button type="button" class="btn btn-primary btn-lg center-block" id="get-data-button">Get Data <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span></button>
    </div>

    <div class="regular-template">
      <div class="alert alert-danger hidden-on-load" role="alert" id="error-alert"><span class="glyphicon glyphicon-exclamation-sign"></span><strong> Whoops!</strong> Make sure you input a UID or choose from the presets at the top!</div>
    </div>

    <div class="regular-template">
      <pre class="hidden-on-load" id="code-box">Url: </pre>
    </div>

    <div class="regular-template">
      <pre class="hidden-on-load" id="call-box">Ajax call: </pre>
    </div>

    <div class="regular-template">
      <table class="table table-striped hidden-on-load" id="table-container">
        <thead>
          <tr>
            <th class="table-title" colspan="2">Here's the data you asked for!</th>
          </tr>

          <tr>
            <th class="table-column-title">Field</th>
            <th class="table-column-title">Value</th>
          </tr>
        </thead>

        <tbody id="table-data"></tbody>
      </table>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script src="mydexexample1.js"></script>
</body>
</html>
